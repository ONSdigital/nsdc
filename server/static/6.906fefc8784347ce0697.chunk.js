webpackJsonp([6],{799:function(i,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=n(0),r=n(908),s=n(805),o=n(845),a=n(459);n.d(t,"PermissionModule",function(){return c});var c=function(){function i(){}return i}();c=__decorate([n.i(e.i)({imports:[r.a,a.a],declarations:[r.b],providers:[s.a,o.a]})],c)},805:function(i,t,n){"use strict";var e=n(0),r=n(96),s=n(280);n.d(t,"a",function(){return o});var o=function(){function i(i,t){this.http=i,this.config=t,this.actionUrl=t.ServerWithApiUrl+"permissions"}return i.prototype.addPermission=function(i){return this.http.post(this.actionUrl,i)},i.prototype.updatePermission=function(i){return this.http.put(this.actionUrl+"/"+i.id,i)},i.prototype.deletePermission=function(i){return this.http.delete(this.actionUrl+"/"+i)},i.prototype.getPermissions=function(){return this.http.get(this.actionUrl)},i.prototype.getPermissionById=function(i){return this.http.get(this.actionUrl+"/"+i)},i.prototype.getPermissionByRole=function(i){return this.http.get(this.actionUrl+"/role/"+i)},i}();o=__decorate([n.i(e.p)(),__metadata("design:paramtypes",[s.a,r.a])],o)},845:function(i,t,n){"use strict";var e=n(0),r=n(805);n.d(t,"a",function(){return s});var s=function(){function i(i){this.PermissionService=i}return i.prototype.resolve=function(i,t){return this.PermissionService.getPermissionById(i.params.id)},i}();s=__decorate([n.i(e.p)(),__metadata("design:paramtypes",[r.a])],s)},851:function(i,t){i.exports='<div class="container">\n    <h2>Permissions</h2>\n    <br>\n    <form [formGroup]="permissionForm" (ngSubmit)="onSubmit()">\n        <div class="form-group">\n            <label>Name:</label>\n            <input type="text" #refName class="form-control" formControlName="name" placeholder="permission name">\n            <nsdc-validator [control]="permissionForm.controls[\'name\']"></nsdc-validator>\n        </div>\n        <div class="form-group">\n            <label>Short Name:</label>\n            <input type="text" #refName class="form-control" formControlName="short_name" placeholder="permission short name">\n            <nsdc-validator [control]="permissionForm.controls[\'short_name\']"></nsdc-validator>\n        </div>\n        <div class="form-group">\n            <label>Description:</label>\n            <input type="text" #refName class="form-control" formControlName="description" placeholder="Description">\n            <nsdc-validator [control]="permissionForm.controls[\'description\']"></nsdc-validator>\n        </div>\n        <button type="submit" class="btn btn-primary" [disabled]="!permissionForm.valid">Submit</button>\n    </form>\n</div>\n'},906:function(i,t,n){"use strict";var e=n(0),r=n(177),s=n(82),o=n(909),a=n(805);n.d(t,"a",function(){return c});var c=function(){function i(i,t,n){this._formBuilder=i,this.permissionService=t,this.router=n,this.submitPending=!1,this.submitFailed=!1}return i.prototype.ngOnInit=function(){this.permissionForm=this._formBuilder.group({name:["",[r.a.required]],short_name:["",[r.a.required]],description:["",[r.a.required]]}),this.permission=new o.a},i.prototype.onSubmit=function(){var i=this;this.permission.name=this.permissionForm.controls.name.value,this.permission.short_name=this.permissionForm.controls.short_name.value,this.permission.description=this.permissionForm.controls.description.value,this.permissionService.addPermission(this.permission).subscribe(function(){i.submitPending=!1,i.router.navigate(["/permissions"])},function(t){i.submitPending=!1,i.submitFailed=!0})},i}();c=__decorate([n.i(e._2)({selector:"nsdc-add-permission",template:n(851)}),__metadata("design:paramtypes",[r.b,a.a,s.a])],c)},907:function(i,t,n){"use strict";var e=n(0),r=n(177),s=n(82),o=n(805);n.d(t,"a",function(){return a});var a=function(){function i(i,t,n,e){this._formBuilder=i,this.permissionService=t,this.router=n,this.route=e,this.submitPending=!1,this.submitFailed=!1}return i.prototype.ngOnInit=function(){var i=this;this.permissionForm=this._formBuilder.group({name:["",[r.a.required]],short_name:["",[r.a.required]],description:["",[r.a.required]]}),this.route.data.subscribe(function(t){i.permission=t.permission,i.permissionForm.patchValue(i.permission)})},i.prototype.onSubmit=function(){var i=this;Object.keys(this.permissionForm.controls).forEach(function(t){return i.permission[t]=i.permissionForm.controls[t].value}),this.permissionService.updatePermission(this.permission).subscribe(function(){i.submitPending=!1,i.router.navigate(["/permissions"])},function(t){i.submitPending=!1,i.submitFailed=!0})},i}();a=__decorate([n.i(e._2)({selector:"nsdc-edit-permission",template:n(851)}),__metadata("design:paramtypes",[r.b,o.a,s.a,s.c])],a)},908:function(i,t,n){"use strict";var e=n(0),r=n(82),s=n(460),o=n(910),a=n(906),c=n(907),m=n(845);n.d(t,"a",function(){return p}),n.d(t,"b",function(){return d});var u=[{canActivate:[s.a],path:"add",component:a.a,data:{permission:"ADD_PERMISSIONS"}},{canActivate:[s.a],path:":id",component:c.a,data:{permission:"EDIT_PERMISSIONS"},resolve:{permission:m.a}},{canActivate:[s.a],path:"",component:o.a,data:{permission:"VIEW_PERMISSIONS"}}],p=function(){function i(){}return i}();p=__decorate([n.i(e.i)({imports:[r.b.forChild(u)],exports:[r.b]})],p);var d=[o.a,a.a,c.a]},909:function(i,t,n){"use strict";n.d(t,"a",function(){return e});var e=function(){function i(){}return i}()},910:function(i,t,n){"use strict";var e=n(0),r=n(805),s=n(281);n.d(t,"a",function(){return o});var o=function(){function i(i,t){this.permissionService=i,this.toasterService=t,this.loading=!1}return i.prototype.ngOnInit=function(){var i=this;this.loading=!0,this.permissionService.getPermissions().subscribe(function(t){i.loading=!1,i.permissions=t})},i.prototype.onDeleteClicked=function(i){var t=this;this.permissionService.deletePermission(i).subscribe(function(){return t.permissionService.getPermissions().subscribe(function(i){return t.permissions=i})},function(i){return t.toasterService.pop("error",i.message)})},i}();o=__decorate([n.i(e._2)({selector:"nsdc-permissions",template:n(950)}),__metadata("design:paramtypes",[r.a,s.b])],o)},950:function(i,t){i.exports='<div class="container">\n  <h2>Permissions</h2>\n  <div class="manage">\n    <a class="btn btn-primary right" [routerLink]="[\'/permissions/add\']">Add Permission</a>\n  </div>                \n  <table *ngIf="!loading" class="table table-hover">\n    <thead>\n      <tr>\n        <th>Permission Name</th>\n        <th>Short Name</th>\n        <th>Description</th>\n        <th></th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr *ngFor="let permission of permissions">\n        <td><a href="#" [routerLink]="[\'/permissions\', permission.id]" routerLinkActive="active">{{permission.name}}</a></td>\n        <td>{{permission.short_name}}</td>\n        <td>{{permission.description}}</td>\n        <td class="options">\n          <button\n            class="btn btn-danger right"\n            [nsdcConfirmModal]="\'Are you sure you want to delete this permission?\'"\n            (confirmed)="onDeleteClicked(permission.id)">\n            Delete\n          </button>\n          <button\n            class="btn btn-primary btn-extra right"\n            [routerLink]="[\'/permissions\', permission.id]">\n            Edit\n          </button>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <nsdc-loading *ngIf="loading"></nsdc-loading>\n</div>\n'}});