webpackJsonp([2],{791:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),n=r(908),o=r(451),s=r(797),a=r(793),l=r(796),d=r(818),c=r(837),u=r(452);r.d(e,"RoleModule",function(){return p});var p=function(){function t(){}return t}();p=__decorate([r.i(i.i)({imports:[n.a,d.a,u.a],declarations:[n.b],providers:[s.a,o.a,a.a,l.a,c.a]})],p)},793:function(t,e,r){"use strict";var i=r(0),n=r(96),o=r(278);r.d(e,"a",function(){return s});var s=function(){function t(t,e){this.http=t,this.config=e,this.actionUrl=e.ServerWithApiUrl+"journeys",this.versionUrl=this.actionUrl+"/versions"}return t.prototype.addJourney=function(t){return this.http.post(this.actionUrl,t)},t.prototype.getJourneys=function(){return this.http.get(this.actionUrl)},t.prototype.updateJourney=function(t){return this.http.put(this.actionUrl+"/"+t.id,t)},t.prototype.getAllJourneyVersions=function(){return this.http.get(this.versionUrl)},t.prototype.getVersionsByRole=function(t){return this.http.get(this.versionUrl+"/roles/"+t)},t.prototype.getJourneyById=function(t){return this.http.get(this.actionUrl+"/"+t)},t.prototype.deleteJourney=function(t){return this.http.delete(this.actionUrl+"/"+t)},t.prototype.getSteps=function(){return this.http.get(this.actionUrl+"/steps")},t.prototype.getStepsByJourneyVersion=function(t){return this.http.get(this.versionUrl+"/"+t+"/steps")},t.prototype.addJourneyVersion=function(t){return this.http.post(this.versionUrl,t)},t.prototype.updateJourneyVersion=function(t){return this.http.put(this.versionUrl+"/"+t.id,t)},t.prototype.getJourneyVersions=function(t){return this.http.get(this.actionUrl+"/"+t+"/versions")},t.prototype.getJourneyVersionById=function(t){return this.http.get(this.versionUrl+"/"+t)},t.prototype.updateJourneyVersionSteps=function(t,e){return this.http.post(this.versionUrl+"/"+t+"/updatesteps",{steps:e})},t.prototype.deleteJourneyVersion=function(t){return this.http.delete(this.versionUrl+"/"+t)},t}();s=__decorate([r.i(i.p)(),__metadata("design:paramtypes",[o.a,n.a])],s)},796:function(t,e,r){"use strict";var i=r(0),n=r(96),o=r(278);r.d(e,"a",function(){return s});var s=function(){function t(t,e){this.http=t,this.config=e,this.actionUrl=e.ServerWithApiUrl+"permissions"}return t.prototype.addPermission=function(t){return this.http.post(this.actionUrl,t)},t.prototype.updatePermission=function(t){return this.http.put(this.actionUrl+"/"+t.id,t)},t.prototype.deletePermission=function(t){return this.http.delete(this.actionUrl+"/"+t)},t.prototype.getPermissions=function(){return this.http.get(this.actionUrl)},t.prototype.getPermissionById=function(t){return this.http.get(this.actionUrl+"/"+t)},t.prototype.getPermissionByRole=function(t){return this.http.get(this.actionUrl+"/role/"+t)},t}();s=__decorate([r.i(i.p)(),__metadata("design:paramtypes",[o.a,n.a])],s)},797:function(t,e,r){"use strict";var i=r(0),n=r(96),o=r(278);r.d(e,"a",function(){return s});var s=function(){function t(t,e){this.http=t,this.config=e,this.actionUrl=e.ServerWithApiUrl+"users"}return t.prototype.addUser=function(t){return this.http.post(this.actionUrl,t)},t.prototype.getUsersByStatus=function(t){return this.http.get(this.actionUrl+"/status/"+t)},t.prototype.getUserById=function(t){return this.http.get(this.actionUrl+"/"+t)},t.prototype.getUsersByRole=function(t){return this.http.get(this.actionUrl+"/role/"+t)},t.prototype.updateUser=function(t){return this.http.put(this.actionUrl+"/"+t.id,t)},t.prototype.deactivateUser=function(t){return this.http.put(this.actionUrl+"/"+t,{status:"inactive"})},t}();s=__decorate([r.i(i.p)(),__metadata("design:paramtypes",[o.a,n.a])],s)},816:function(t,e,r){"use strict";var i=r(0);r.d(e,"a",function(){return n});var n=function(){function t(){this.currentTitle="current",this.otherTitle="other",this.saveDisabled=!1,this.cancelDisabled=!1,this.cancelClicked=new i.G,this.saveClicked=new i.G}return t}();__decorate([r.i(i.w)(),__metadata("design:type",Object)],n.prototype,"currentTitle",void 0),__decorate([r.i(i.w)(),__metadata("design:type",Object)],n.prototype,"otherTitle",void 0),__decorate([r.i(i.w)(),__metadata("design:type",Object)],n.prototype,"saveDisabled",void 0),__decorate([r.i(i.w)(),__metadata("design:type",Object)],n.prototype,"cancelDisabled",void 0),__decorate([r.i(i._1)(),__metadata("design:type",Object)],n.prototype,"cancelClicked",void 0),__decorate([r.i(i._1)(),__metadata("design:type",Object)],n.prototype,"saveClicked",void 0),n=__decorate([r.i(i._2)({selector:"nsdc-dual-list-container",template:r(822),styles:[r(827)]})],n)},817:function(t,e,r){"use strict";var i=r(0);r.d(e,"a",function(){return o});var n=function(){function t(t){this._name=t,this.last=null,this.dragStart=!1,this.dragOver=!1,this.pick=new Array,this.list=[]}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t}(),o=s=function(){function t(t,e){this.differs=t,this.cdr=e,this.key="undefined"!=typeof this.key?this.key:"_id",this.display="undefined"!=typeof this.display?this.display:"_name",this.height="undefined"!=typeof this.height?this.height:"100px",this.sort="undefined"!=typeof this.sort&&this.sort,this.compare="undefined"!=typeof this.compare?this.compare:void 0,this.destinationChange=new i.G,this.sorter=function(t,e){return t._name<e._name?-1:t._name>e._name?1:0}}return t.prototype.ngOnChanges=function(t){t.sort&&(t.sort.currentValue===!0&&void 0===this.compare?this.compare=this.sorter:t.sort.currentValue===!1&&(this.compare=void 0)),t.source&&(this.available=new n(s.AVAILABLE_LIST_NAME),this.updatedSource(),this.updatedDestination()),t.destination&&(this.confirmed=new n(s.CONFIRMED_LIST_NAME),this.updatedDestination(),this.updatedSource())},t.prototype.ngDoCheck=function(){var t=this,e=this.sourceDiffer.diff(this.source);e&&(e.forEachRemovedItem(function(e){var r=t.findItemIndex(t.available.list,e.item,t.key);r!==-1&&t.available.list.splice(r,1)}),e.forEachAddedItem(function(e){t.findItemIndex(t.available.list,e.item,t.key)===-1&&t.available.list.push({_id:e.item[t.key],_name:t.makeName(e.item)})}),void 0!==this.compare&&this.available.list.sort(this.compare));var r=this.destinationDiffer.diff(this.destination);r&&(r.forEachRemovedItem(function(e){var r=t.findItemIndex(t.confirmed.list,e.item,t.key);r!==-1&&(t.isItemSelected(t.confirmed.pick,t.confirmed.list[r])||t.selectItem(t.confirmed.pick,t.confirmed.list[r]),t.moveItem(t.confirmed,t.available,t.confirmed.list[r]))}),r.forEachAddedItem(function(e){var r=t.findItemIndex(t.available.list,e.item,t.key);r!==-1&&(t.isItemSelected(t.available.pick,t.available.list[r])||t.selectItem(t.available.pick,t.available.list[r]),t.moveItem(t.available,t.confirmed,t.available.list[r]))}),void 0!==this.compare&&this.available.list.sort(this.compare))},t.prototype.updatedSource=function(){this.available.list.length=0,this.available.pick.length=0,void 0!==this.source&&(this.sourceDiffer=this.differs.find(this.source).create(this.cdr))},t.prototype.updatedDestination=function(){void 0!==this.destination&&(this.destinationDiffer=this.differs.find(this.destination).create(this.cdr))},t.prototype.dragEnd=function(t){return void 0===t&&(t=null),t?t.dragStart=!1:(this.available.dragStart=!1,this.confirmed.dragStart=!1),!1},t.prototype.drag=function(t,e,r){this.isItemSelected(r.pick,e)||this.selectItem(r.pick,e),r.dragStart=!0,t.dataTransfer.setData("text",e[this.key])},t.prototype.allowDrop=function(t,e){return t.preventDefault(),e.dragStart||(e.dragOver=!0),!1},t.prototype.dragLeave=function(){this.available.dragOver=!1,this.confirmed.dragOver=!1},t.prototype.drop=function(t,e){var r=this;t.preventDefault(),this.dragLeave(),this.dragEnd();var i=t.dataTransfer.getData("text"),n=e.list.filter(function(t){return t[r.key]==i});if(n.length>0)for(var o=0,s=n.length;o<s;o+=1)e.pick.push(n[o]);e===this.available?this.moveItem(this.available,this.confirmed):this.moveItem(this.confirmed,this.available)},t.prototype.trueUp=function(){for(var t=this,e=!1,r=this.destination.length;(r-=1)>=0;){var i=this.confirmed.list.filter(function(e){return e._id===t.destination[r][t.key]});0===i.length&&(this.destination.splice(r,1),e=!0)}for(var n=function(r,i){var n=o.destination.filter(function(e){return e[t.key]===t.confirmed.list[r]._id});0===n.length&&(n=o.source.filter(function(e){return e[t.key]===t.confirmed.list[r]._id}),n.length>0&&(o.destination.push(n[0]),e=!0))},o=this,s=0,a=this.confirmed.list.length;s<a;s+=1)n(s,a);e&&this.destinationChange.emit(this.destination)},t.prototype.findItemIndex=function(t,e,r){void 0===r&&(r="_id");var i=-1;return t.filter(function(n){return n._id===e[r]&&(i=t.indexOf(n),!0)}),i},t.prototype.moveItem=function(t,e,r){void 0===r&&(r=null);var i=0,n=t.pick.length;r&&(i=t.list.indexOf(r),n=i+1);for(var o=function(){var n=[];if(r){var o=s.findItemIndex(t.pick,r);o!==-1&&(n[0]=t.pick[o])}else n=t.list.filter(function(e){return e._id===t.pick[i]._id});if(1===n.length){r&&r._id===n[0]._id?e.list.push(n[0]):0===e.list.filter(function(t){return t._id===n[0]._id}).length&&e.list.push(n[0]);var o=t.list.indexOf(n[0]);o!==-1&&t.list.splice(o,1)}},s=this;i<n;i+=1)o();void 0!==this.compare&&e.list.sort(this.compare),t.pick.length=0,this.trueUp()},t.prototype.isItemSelected=function(t,e){return t.filter(function(t){return Object.is(t,e)}).length>0},t.prototype.shiftClick=function(t,e,r,i){if(t.shiftKey&&r.last&&!Object.is(i,r.last)){var n=r.list.indexOf(r.last);if(e>n)for(var o=n+1;o<e;o+=1)this.selectItem(r.pick,r.list[o]);else if(n!==-1)for(var o=e+1;o<n;o+=1)this.selectItem(r.pick,r.list[o])}r.last=i},t.prototype.selectItem=function(t,e){var r=t.filter(function(t){return Object.is(t,e)});if(r.length>0)for(var i=0,n=r.length;i<n;i+=1){var o=t.indexOf(r[i]);o!==-1&&t.splice(o,1)}else t.push(e)},t.prototype.selectAll=function(t){t.pick.length=0,t.pick=t.list.slice(0)},t.prototype.selectNone=function(t){t.pick.length=0},t.prototype.isAllSelected=function(t){return 0===t.list.length||t.list.length===t.pick.length},t.prototype.isAnySelected=function(t){return t.pick.length>0},t.prototype.makeName=function(t){var e="";if(void 0!==this.display){if("[object Array]"===Object.prototype.toString.call(this.display)){for(var r=0;r<this.display.length;r+=1)if(e.length>0&&(e+="_"),this.display[r].indexOf(".")===-1)e+=t[this.display[r]];else{var i=this.display[r].split("."),n=t[i[0]];if(n)if(i[1].indexOf("substring")!==-1){var o=i[1].substring(i[1].indexOf("(")+1,i[1].indexOf(")")).split(",");switch(o.length){case 1:e+=n.substring(parseInt(o[0],10));break;case 2:e+=n.substring(parseInt(o[0],10),parseInt(o[1],10));break;default:e+=n}}else e+=n}return e}return t[this.display]}switch(Object.prototype.toString.call(t)){case"[object Number]":return t;case"[object String]":return t;default:if(void 0!==t)return t[this.display]}},t}();o.AVAILABLE_LIST_NAME="available",o.CONFIRMED_LIST_NAME="confirmed",__decorate([r.i(i.w)(),__metadata("design:type",String)],o.prototype,"key",void 0),__decorate([r.i(i.w)(),__metadata("design:type",String)],o.prototype,"display",void 0),__decorate([r.i(i.w)(),__metadata("design:type",String)],o.prototype,"height",void 0),__decorate([r.i(i.w)(),__metadata("design:type",Boolean)],o.prototype,"sort",void 0),__decorate([r.i(i.w)(),__metadata("design:type",Function)],o.prototype,"compare",void 0),__decorate([r.i(i.w)(),__metadata("design:type",Array)],o.prototype,"source",void 0),__decorate([r.i(i.w)(),__metadata("design:type",Array)],o.prototype,"destination",void 0),__decorate([r.i(i._1)(),__metadata("design:type",Object)],o.prototype,"destinationChange",void 0),o=s=__decorate([r.i(i._2)({selector:"dual-list",template:r(823),styles:[r(828)]}),__metadata("design:paramtypes",[i.F,i.t])],o);var s},818:function(t,e,r){"use strict";var i=r(0),n=r(82),o=r(177),s=r(817),a=r(816);r.d(e,"a",function(){return l});var l=function(){function t(){}return t}();l=__decorate([r.i(i.i)({imports:[n.b,o.c],exports:[s.a,a.a],declarations:[s.a,a.a],providers:[]})],l)},819:function(t,e,r){e=t.exports=r(127)(),e.push([t.i,".btn-row{width:100%;margin:15px 0}.dual-list-header-row{display:flex}.dual-list-header{flex:1 0 auto;text-align:center}",""])},820:function(t,e,r){e=t.exports=r(127)(),e.push([t.i,"div.record-picker{overflow-x:hidden;overflow-y:auto;border:1px solid #ddd;border-radius:8px;position:relative;cursor:pointer}div.record-picker::-webkit-scrollbar{width:12px}div.record-picker::-webkit-scrollbar-button{width:0;height:0}div.record-picker{scrollbar-base-color:#337ab7;scrollbar-3dlight-color:#337ab7;scrollbar-highlight-color:#337ab7;scrollbar-track-color:#eee;scrollbar-arrow-color:gray;scrollbar-shadow-color:gray;scrollbar-dark-shadow-color:gray}div.record-picker::-webkit-scrollbar-track{background:#eee;box-shadow:inset 0 0 3px #dfdfdf;border-top-right-radius:8px;border-bottom-right-radius:8px}div.record-picker::-webkit-scrollbar-thumb{background:#337ab7;border:thin solid gray;border-top-right-radius:8px;border-bottom-right-radius:8px}div.record-picker::-webkit-scrollbar-thumb:hover{background:#286090}.record-picker ul{margin:0;padding:0 0 1px}.record-picker li{border-top:thin solid #ddd;border-bottom:1px solid #ddd;display:block;padding:2px 2px 2px 10px;margin-bottom:-1px;font-size:.85em;cursor:pointer;white-space:nowrap;min-height:16px}.record-picker li:hover{background-color:#f5f5f5}.record-picker li.selected{background-color:#d9edf7}.record-picker li.selected:hover{background-color:#c4e3f3}.record-picker li.disabled{opacity:.5;cursor:default}.record-picker li:first-child{border-top-left-radius:8px;border-top-right-radius:8px;border-top:none}.record-picker li:last-child{border-bottom-left-radius:8px;border-bottom-right-radius:8px;border-bottom:none}.record-picker label{cursor:pointer;font-weight:inherit;font-size:14px;padding:4px;margin-bottom:-1px;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.record-picker ul.over{background-color:#d3d3d3}",""])},822:function(t,e){t.exports='<div>\r\n  <div class="col-md-12">\r\n    <div class="dual-list-header-row">\r\n      <h5 class="dual-list-header">{{otherTitle}}</h5>\r\n      <h5 class="dual-list-header">{{currentTitle}}</h5>\r\n    </div>\r\n  </div>\r\n  <div class="col-md-12">\r\n    <ng-content></ng-content>\r\n  </div>\r\n  <div class="col-md-12">\r\n    <div class="btn-row">\r\n      <button\r\n        class="btn btn-primary"\r\n        (click)="saveClicked.emit()"\r\n        [disabled]="saveDisabled"\r\n      >\r\n        Save\r\n      </button>\r\n      <button\r\n        class="btn btn-danger"\r\n        (click)="cancelClicked.emit()"\r\n        [disabled]="cancelDisabled"\r\n      >Cancel</button>\r\n    <div>\r\n  <div>\r\n</div>\r\n'},823:function(t,e){t.exports='<div style="display:-webkit-box;display:flex;flex-direction:row;align-content:flex-start;">\r\n\t<form style="width:50%;margin:0px;">\r\n\t\t<button type="button" name="addBtn" class="btn btn-primary"\r\n\t\t\tstyle="display:block;width:100%;margin-bottom:8px;"\r\n\t\t\t(click)="moveItem(available, confirmed)"\r\n\t\t\t[disabled]="available.pick.length === 0">Add&nbsp;&nbsp;&nbsp;&nbsp;&#9654;</button>\r\n\r\n\t\t<div class="record-picker">\r\n\t\t\t<ul [ngStyle]="{\'max-height\': height, \'min-height\': height}" [ngClass]="{over:available.dragOver}"\r\n\t\t\t\t(drop)="drop($event, confirmed)" (dragover)="allowDrop($event, available)" (dragleave)="dragLeave()">\r\n\t\t\t\t<li *ngFor="let item of available.list; let idx=index;"\r\n\t\t\t\t\t(click)="selectItem(available.pick, item); shiftClick($event, idx, available, item)"\r\n\t\t\t\t\t[ngClass]="{selected: isItemSelected(available.pick, item)}"\r\n\t\t\t\t\tdraggable="true" (dragstart)="drag($event, item, available)" (dragend)="dragEnd(available)"\r\n\t\t\t\t><label>{{item._name}}</label></li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\r\n\t\t<div style="margin-top:8px;">\r\n\t\t\t<button type="button" class="btn btn-primary"\r\n\t\t\t\tstyle="width:47%;float:left;" (click)="selectAll(available)"\r\n\t\t\t\t[disabled]="isAllSelected(available)">All</button>\r\n\t\t\t<button type="button" class="btn btn-default"\r\n\t\t\t\tstyle="width:47%;float:right;margin-right:0px;" (click)="selectNone(available)"\r\n\t\t\t\t[disabled]="!isAnySelected(available)">None</button>\r\n\t\t</div>\r\n\t</form>\r\n\r\n\t<form style="width:50%;margin:0 0 0 10px;">\r\n\t\t<button type="button" name="removeBtn" class="btn btn-primary"\r\n\t\t\tstyle="display:block;width:100%;margin-bottom:8px;"\r\n\t\t\t(click)="moveItem(confirmed, available)"\r\n\t\t\t[disabled]="confirmed.pick.length === 0">&#9664;&nbsp;&nbsp;&nbsp;&nbsp;Remove</button>\r\n\r\n\t\t<div class="record-picker">\r\n\t\t\t<ul [ngStyle]="{\'max-height\': height, \'min-height\': height}" [ngClass]="{over:confirmed.dragOver}"\r\n\t\t\t\t(drop)="drop($event, available)" (dragover)="allowDrop($event, confirmed)" (dragleave)="dragLeave()">\r\n\t\t\t\t<li *ngFor="let item of confirmed.list; let idx=index;"\r\n\t\t\t\t\t(click)="selectItem(confirmed.pick, item); shiftClick($event, idx, confirmed, item)"\r\n\t\t\t\t\t[ngClass]="{selected: isItemSelected(confirmed.pick, item)}"\r\n\t\t\t\t\tdraggable="true" (dragstart)="drag($event, item, confirmed)" (dragend)="dragEnd(confirmed)"\r\n\t\t\t\t><label>{{item._name}}</label></li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t\t<div style="margin-top:8px;">\r\n\t\t\t<button type="button" class="btn btn-primary"\r\n\t\t\t\tstyle="width:47%;float:left;" (click)="selectAll(confirmed)"\r\n\t\t\t\t[disabled]="isAllSelected(confirmed)">All</button>\r\n\t\t\t<button type="button" class="btn btn-default"\r\n\t\t\t\tstyle="width:47%;float:right;margin-right:0px;" (click)="selectNone(confirmed)"\r\n\t\t\t\t[disabled]="!isAnySelected(confirmed)">None</button>\r\n\t\t</div>\r\n\t</form>\r\n</div>\r\n'},827:function(t,e,r){var i=r(819);"string"==typeof i?t.exports=i:t.exports=i.toString()},828:function(t,e,r){var i=r(820);"string"==typeof i?t.exports=i:t.exports=i.toString()},837:function(t,e,r){"use strict";var i=r(0),n=r(451);r.d(e,"a",function(){return o});var o=function(){function t(t){this.roleService=t}return t.prototype.resolve=function(t,e){return this.roleService.getRoleById(t.params.id)},t}();o=__decorate([r.i(i.p)(),__metadata("design:paramtypes",[n.a])],o)},843:function(t,e){t.exports='<div class="container">\r\n  <h2>Role</h2>\r\n  <br />\r\n  <form [formGroup]="roleForm" (ngSubmit)="onSubmit()">\r\n    <div class="form-group">\r\n      <label>Name:</label>\r\n      <input type="text" #refName class="form-control" formControlName="name" placeholder="Role name">\r\n      <nsdc-validator [control]="roleForm.controls[\'name\']"></nsdc-validator>\r\n    </div>\r\n    <div class="form-group">\r\n      <label>Description:</label>\r\n      <input type="text" #refName class="form-control" formControlName="description" placeholder="Description">\r\n      <nsdc-validator [control]="roleForm.controls[\'description\']"></nsdc-validator>\r\n    </div>\r\n    <button type="submit" class="btn btn-primary">Submit</button>    \r\n  </form>\r\n</div>\r\n'},902:function(t,e,r){"use strict";var i=r(0),n=r(177),o=r(80),s=r(909),a=r(451);r.d(e,"a",function(){return l});var l=function(){function t(t,e,r){this._formBuilder=t,this.roleService=e,this.router=r}return t.prototype.ngOnInit=function(){this.roleForm=this._formBuilder.group({name:["",[n.a.required]],description:["",[n.a.required]]}),this.role=new s.a},t.prototype.onSubmit=function(){var t=this;Object.keys(this.roleForm.controls).forEach(function(e){return t.role[e]=t.roleForm.controls[e].value}),this.roleService.addRole(this.role).subscribe(function(){t.router.navigate(["roles"])},function(t){console.log(t)})},t}();l=__decorate([r.i(i._2)({selector:"nsdc-add-role",template:r(843)}),__metadata("design:paramtypes",[n.b,a.a,o.a])],l)},903:function(t,e,r){"use strict";var i=r(0),n=r(177),o=r(80),s=r(451);r.d(e,"a",function(){return a});var a=function(){function t(t,e,r,i){this._formBuilder=t,this.roleService=e,this.router=r,this.route=i}return t.prototype.ngOnInit=function(){var t=this;this.roleForm=this._formBuilder.group({name:["",[n.a.required]],description:["",[n.a.required]]}),this.route.data.subscribe(function(e){t.role=e.role,t.roleForm.patchValue(t.role)})},t.prototype.onSubmit=function(){var t=this;Object.keys(this.roleForm.controls).forEach(function(e){return t.role[e]=t.roleForm.controls[e].value}),this.roleService.updateRole(this.role).subscribe(function(){t.router.navigate(["roles"])},function(t){console.log(t)})},t}();a=__decorate([r.i(i._2)({selector:"nsdc-edit-role",template:r(843)}),__metadata("design:paramtypes",[n.b,s.a,o.a,o.c])],a)},904:function(t,e,r){"use strict";r.d(e,"a",function(){return i});var i=function(){function t(t,e,r,i){this.version_id=t,this.version_number=e,this.name=r,this.displayName=i}return t}()},905:function(t,e,r){"use strict";var i=r(0),n=r(80),o=r(451),s=r(793),a=r(904),l=r(4);r.n(l);r.d(e,"a",function(){return d});var d=function(){function t(t,e,r,i){this.route=t,this.router=e,this.journeyService=r,this.roleService=i,this.allRoleJourneyVersions=[],this.selectedRoleJourneyVersions=[],this.keepSorted=!0,this.key="version_id",this.display="displayName",this.loading=!1,this.submitPending=!1,this.submitFailed=!1}return t.prototype.ngOnInit=function(){var t=this;this.loading=!0,this.route.data.subscribe(function(e){var r=e.role;t.journeyService.getAllJourneyVersions().mergeMap(function(e){var r=e.map(function(e){return t.journeyService.getJourneyById(e.journey_id).map(function(t){return new a.a(e.id,e.version_number,t.name,t.name+" (v"+e.version_number+")")})});return l.Observable.forkJoin(r)}).subscribe(function(e){t.role=r,t.allRoleJourneyVersions=e,t.journeyService.getVersionsByRole(r.id).subscribe(function(r){var i=r.map(function(t){return t.id});t.selectedRoleJourneyVersions=e.filter(function(t){return i.includes(t.version_id)}),t.loading=!1})})})},t.prototype.saveUpdatedRoleJourneyVersions=function(){var t=this;this.submitPending=!0,this.submitFailed=!1;var e=this.selectedRoleJourneyVersions.map(function(t){return t.version_id});this.roleService.updateRoleJourneyVersions(this.role.id,e).subscribe(function(){t.submitPending=!1,t.router.navigate(["/roles"])},function(e){t.submitPending=!1,t.submitFailed=!0})},t.prototype.cancel=function(){this.router.navigate(["/roles"])},t}();d=__decorate([r.i(i._2)({selector:"nsdc-role-journey-versions",template:r(942)}),__metadata("design:paramtypes",[n.c,n.a,s.a,o.a])],d)},906:function(t,e,r){"use strict";var i=r(0),n=r(451),o=r(797),s=r(796),a=r(4);r.n(a);r.d(e,"a",function(){return l});var l=function(){function t(t,e,r){this.roleService=t,this.userService=e,this.permissionService=r,this.loading=!1,this.dropdownLoading=!1}return t.prototype.ngOnInit=function(){var t=this;this.loading=!0,this.dropdownLoading=!0,this.roleService.getRoles().subscribe(function(e){t.loading=!1,t.dropdownLoading=!1,t.roles=e})},t.prototype.onChange=function(t){var e=this;this.selectedRoleId=t,""!==t&&(this.loading=!0,a.Observable.forkJoin([this.userService.getUsersByRole(t).map(function(t){return e.users=t}),this.permissionService.getPermissionByRole(t).map(function(t){return e.permissions=t})]).subscribe(function(){return e.loading=!1}))},t}();l=__decorate([r.i(i._2)({selector:"nsdc-role-manage",template:r(943)}),__metadata("design:paramtypes",[n.a,o.a,s.a])],l)},907:function(t,e,r){"use strict";var i=r(0),n=r(80),o=r(451),s=r(796),a=r(128),l=r(4);r.n(l);r.d(e,"a",function(){return d});var d=function(){function t(t,e,r,i,n){this.route=t,this.router=e,this.roleService=r,this.permissionService=i,this.userPermissionsService=n,this.keepSorted=!0,this.key="id",this.display="name",this.loading=!1,this.submitPending=!1,this.submitFailed=!1}return t.prototype.ngOnInit=function(){var t=this;this.route.params.subscribe(function(e){var r=Number.parseInt(e.id);t.loading=!0,l.Observable.forkJoin([t.roleService.getRoleById(r).map(function(e){return t.role=e}),t.permissionService.getPermissions().map(function(e){return t.allPermissions=e}),t.permissionService.getPermissionByRole(r).map(function(e){return t.selectedPermissions=e})]).subscribe(function(){return t.loading=!1})})},t.prototype.saveUpdatedRolePermissions=function(){var t=this;this.submitPending=!0,this.submitFailed=!1;var e=this.selectedPermissions.map(function(t){return t.id});this.roleService.updateRolePermissions(this.role.id,e).subscribe(function(){t.submitPending=!1,t.userPermissionsService.clearPermissionsCache(),t.router.navigate(["/roles/manage"])},function(e){t.submitPending=!1,t.submitFailed=!0})},t.prototype.cancel=function(){this.router.navigate(["/roles/manage"])},t}();d=__decorate([r.i(i._2)({selector:"nsdc-role-permissions",template:r(944)}),__metadata("design:paramtypes",[n.c,n.a,o.a,s.a,a.a])],d)},908:function(t,e,r){"use strict";var i=r(0),n=r(80),o=r(453),s=r(910),a=r(902),l=r(903),d=r(906),c=r(907),u=r(837),p=r(905);r.d(e,"a",function(){return f}),r.d(e,"b",function(){return m});var h=[{canActivate:[o.a],path:"",component:s.a,data:{permission:"VIEW_ROLES"}},{canActivate:[o.a],path:"add",component:a.a,data:{permission:"ADD_ROLES"}},{canActivate:[o.a],path:"manage",component:d.a,data:{permission:"VIEW_ROLES"}},{canActivate:[o.a],path:":id/permissions",component:c.a,data:{permission:"EDIT_ROLES"}},{canActivate:[o.a],path:":id",component:l.a,data:{permission:"EDIT_ROLES"},resolve:{role:u.a}},{canActivate:[o.a],path:":id/journey-versions",component:p.a,data:{permission:"VIEW_ROLES"},resolve:{role:u.a}}],f=function(){function t(){}return t}();f=__decorate([r.i(i.i)({imports:[n.b.forChild(h)],exports:[n.b]})],f);var m=[s.a,a.a,l.a,d.a,c.a,p.a]},909:function(t,e,r){"use strict";r.d(e,"a",function(){return i});var i=function(){function t(){}return t}()},910:function(t,e,r){"use strict";var i=r(0),n=r(451),o=r(25),s=r(179);r.d(e,"a",function(){return a});var a=function(){function t(t,e,r,i){this.roleService=t,this.modal=e,this.loading=!1,r.defaultViewContainer=i}return t.prototype.ngOnInit=function(){var t=this;this.loading=!0,this.roleService.getRoles().subscribe(function(e){t.loading=!1,t.roles=e})},t.prototype.onDeleteClicked=function(t){var e=this;this.roleService.deleteRole(t).subscribe(function(){return e.roleService.getRoles().subscribe(function(t){return e.roles=t})})},t}();a=__decorate([r.i(i._2)({selector:"nsdc-roles",template:r(945)}),__metadata("design:paramtypes",[n.a,s.a,o.a,i.z])],a)},942:function(t,e){t.exports='<div *ngIf="!loading">\r\n  <div>\r\n    <a [routerLink]="[\'/roles\']">Roles</a> >\r\n    {{ role.name }}\r\n  </div>\r\n  <div class="dashboard-tag">\r\n    Please use the following to associate a Role to Journey Versions.\r\n  </div>\r\n  <nsdc-dual-list-container\r\n    otherTitle="Other Journey Versions"\r\n    currentTitle="Current Journey Versions"\r\n    (saveClicked)="saveUpdatedRoleJourneyVersions()"\r\n    (cancelClicked)="cancel()"\r\n    [saveDisabled]="submitPending"\r\n    [cancelDisabled]="submitPending"\r\n  >\r\n    <dual-list\r\n      [sort]="keepSorted"\r\n      [source]="allRoleJourneyVersions"\r\n      [key]="key"\r\n      [display]="display"\r\n      [(destination)]="selectedRoleJourneyVersions"\r\n      height="265px"\r\n    >\r\n    </dual-list>\r\n  </nsdc-dual-list-container>\r\n</div>\r\n<nsdc-loading *ngIf="loading"></nsdc-loading>\r\n'},943:function(t,e){t.exports='<div class="container">\r\n    <h2>Manage Roles</h2>\r\n    <div class="form-group" *ngIf="!dropdownLoading">\r\n        <select class="form-control" (change)="onChange($event.target.value)">\r\n            <option style="display:block" value="">Choose a Role</option>\r\n            <option *ngFor="let role of roles" [value]="role.id">{{ role.name }} </option>\r\n        </select>       \r\n    </div>\r\n</div>\r\n<div *ngIf="selectedRoleId && !loading" class="container">\r\n  <div class="role-user-section">\r\n    <h4>Users</h4>\r\n    <table class="table table-hover">\r\n      <thead>\r\n        <tr>\r\n          <th>UserName</th>\r\n          <th>Firstname</th>\r\n          <th>Lastname</th>\r\n          <th>Email</th>\r\n          <th>Status</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr *ngFor="let user of users">\r\n          <td><a href="#" [routerLink]="[\'/users\', user.id]" routerLinkActive="active">{{user.username}}</a></td>\r\n          <td>{{user.firstname}}</td>\r\n          <td>{{user.lastname}}</td>\r\n          <td>{{user.email}}</td>\r\n          <td>{{user.status}}</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n  <div class="role-section">\r\n    <h4>Permissions</h4>\r\n    <div class="manage-permissions">\r\n        <a class="btn btn-primary right"\r\n          [routerLink]="[\'/roles\', selectedRoleId, \'permissions\']"\r\n        >\r\n          Add/Remove Permissions\r\n        </a>\r\n    </div>\r\n    <table class="table table-hover">\r\n      <thead>\r\n        <tr>\r\n          <th>Permission Name</th>\r\n          <th>Short Name</th>\r\n          <th>Description</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr *ngFor="let permission of permissions">\r\n          <td><a href="#" [routerLink]="[\'/permissions\', permission.id]" routerLinkActive="active">{{permission.name}}</a></td>\r\n          <td>{{permission.short_name}}</td>\r\n          <td>{{permission.description}}</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</div>\r\n<nsdc-loading *ngIf="loading"></nsdc-loading>\r\n'},944:function(t,e){t.exports='<div *ngIf="!loading">\r\n  <div>\r\n    <a [routerLink]="[\'/roles\']">Roles</a> >\r\n    {{ role.name }}\r\n  </div>\r\n  <div class="dashboard-tag">\r\n    Please use the following to associate a Role to Journey Versions.\r\n  </div>\r\n  <nsdc-dual-list-container\r\n    otherTitle="Other Permissions"\r\n    currentTitle="Current Permissions"\r\n    (saveClicked)="saveUpdatedRolePermissions()"\r\n    (cancelClicked)="cancel()"\r\n    [saveDisabled]="submitPending"\r\n    [cancelDisabled]="submitPending"\r\n  >\r\n    <dual-list\r\n      [sort]="keepSorted"\r\n      [source]="allPermissions"\r\n      [key]="key"\r\n      [display]="display"\r\n      [(destination)]="selectedPermissions"\r\n      height="265px"\r\n    >\r\n    </dual-list>\r\n  </nsdc-dual-list-container>\r\n</div>\r\n<nsdc-loading *ngIf="loading"></nsdc-loading>\r\n'},945:function(t,e){t.exports='<div class="container">\r\n  <h2>Roles</h2>\r\n  <div class="manage">\r\n    <a class="btn btn-primary right" [routerLink]="[\'/roles/add\']">Add Role</a>\r\n    <a class="btn btn-primary btn-extra right" [routerLink]="[\'/roles/manage\']">Manage</a>\r\n    <div class="clear"></div>\r\n  </div>\r\n  <table *ngIf="!loading" class="table table-hover">\r\n    <thead>\r\n      <tr>\r\n        <th>Role Name</th>\r\n        <th>Description</th>\r\n        <th></th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr *ngFor="let role of roles">\r\n        <td><a href="#" [routerLink]="[\'/roles\', role.id]" routerLinkActive="active">{{role.name}}</a></td>\r\n        <td>{{role.description}}</td>\r\n        <td class="options options-large">\r\n          <button class="btn btn-danger right"\r\n                  [nsdcConfirmModal]="\'Are you sure you want to delete this user?\'"\r\n                  (confirmed)="onDeleteClicked(role.id)">\r\n            Delete\r\n          </button>\r\n          <button\r\n            class="btn btn-primary btn-extra right "\r\n            [routerLink]="[\'/roles\', role.id]">\r\n            Edit\r\n          </button>\r\n          <button\r\n                class="btn btn-info btn-extra right "\r\n                [routerLink]="[\'/roles/\' + role.id + \'/permissions\']">\r\n            Permissions\r\n          </button>\r\n          <button\r\n                  class="btn btn-warning btn-extra right "\r\n                  [routerLink]="[\'/roles/\' + role.id + \'/journey-versions\']">\r\n            Journey Versions\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  <nsdc-loading *ngIf="loading"></nsdc-loading>\r\n</div>\r\n';
}});